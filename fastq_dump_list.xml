<tool id="fastq_dump_Bioproject" name="Bioproject Fastq Dump" version="0.2">
    <description>Downloads SRR files based on Bioproject nb</description>
    <requirements>
        <!-- Should just use the ncbi tools that's installed in the path -->
        <requirement type="binary">esearch</requirement>
        <requirement type="binary">efetch</requirement>
        <requirement type="binary">fastq-dump</requirement>
    </requirements>
    <command>
        esearch -db sra -query $Bioproject | efetch --format runinfo | cut -d ',' -f 1 | grep SRR | xargs fastq-dump --outdir $Bioproject --skip-technical --split-files --readids --dumpbase --clip --ncbi_error_report never --log-level fatal
    </command>
    <inputs>
        <param name="$Bioproject" type="text" label="$Bioproject"/>
    </inputs>
    <outputs>
        <collection type="list" label="$Bioproject" name="output1">
            <discover_datasets pattern="(?P&lt;name&gt;.*)" directory="$Bioproject" />
            </collection>
    </outputs>
    
    
    <help>
        **What it does**
        
        Grabs all SRR linked to Bioproject number for Illumina paired reads
        
        
        
    </help>
</tool>